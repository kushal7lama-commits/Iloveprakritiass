<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Year Proposal</title>
<style>
/* General Styles */
body, html { margin: 0; padding: 0; font-family: 'Comic Sans MS', cursive, sans-serif; overflow: hidden; }
.hidden { display: none; }
button { padding: 10px 20px; margin: 10px; cursor: pointer; border-radius: 8px; border: none; background: #ff99cc; color: white; font-weight: bold; }
input { padding: 10px; border-radius: 8px; border: 2px solid #ff99cc; width: 80%; max-width: 300px; }
h1, h2, h3 { text-align: center; }

/* Lock Screen */
#lockScreen { width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #fff; text-shadow: 2px 2px 5px #000; background: url('https://i.ibb.co/3v0VYbM/hello-kitty.png') no-repeat center/cover; background-size: cover; }
#lockScreen input { font-size: 18px; text-align: center; }
#lockScreen button { font-size: 18px; }

/* Safe Message */
#safeMessage { width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #ffe6f0; color: #ff3399; font-size: 40px; }

/* Countdown */
#countdown { width: 100%; height: 100vh; background: #ffe6f0; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 60px; color: #ff3399; position: relative; }

/* Happy New Year Page */
#happyNewYear { width: 100%; height: 100vh; background: #ffccf2; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #ff0066; font-size: 50px; position: relative; }
canvas { position: absolute; top: 0; left: 0; z-index: 0; }

/* Questions Page */
.questionPage { width: 100%; height: 100vh; background: #ffe6f0; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; text-align: center; }
.questionPage textarea { width: 80%; max-width: 400px; height: 100px; border-radius: 8px; border: 2px solid #ff99cc; padding: 10px; font-size: 16px; }

/* Result Page */
#resultPage { width: 100%; min-height: 100vh; background: #fff0f5; padding: 20px; overflow-y: auto; text-align: center; }
#resultPage div { margin-bottom: 20px; padding: 10px; border-radius: 10px; background: #ffe6f0; }

/* Proposal Page */
#proposalPage { width: 100%; height: 100vh; background: #ffccf2; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 50px; color: #ff0066; position: relative; }

/* Floating Hello Kitty */
.kitty { position: absolute; width: 50px; height: 50px; pointer-events: none; animation: float 10s linear infinite; }
@keyframes float { 0% { transform: translateY(100vh) translateX(0); } 100% { transform: translateY(-50px) translateX(500px); } }
</style>
</head>
<body>

<!-- Lock Screen -->
<div id="lockScreen">
    <h1>Hello Kitty Lock</h1>
    <input type="text" id="passwordInput" placeholder="Enter password">
    <button onclick="checkPassword()">Unlock</button>
    <p>Hint: When we started our relationship?</p>
    <p id="lockMsg" style="color:yellow;"></p>
</div>

<!-- Safe Message -->
<div id="safeMessage" class="hidden">
    <h1>You are safe! ðŸŽ‰</h1>
    <button onclick="startCountdownInterface()">Next</button>
</div>

<!-- Countdown -->
<div id="countdown" class="hidden">
    <h1 id="countdownNumber">10</h1>
</div>

<!-- Happy New Year -->
<div id="happyNewYear" class="hidden">
    <canvas id="fireworks"></canvas>
    <h1>Happy New Year!</h1>
</div>

<!-- Question Pages -->
<div id="question1" class="questionPage hidden">
    <h2>Question 1: What do you love most about us?</h2>
    <textarea id="answer1"></textarea>
    <button onclick="nextQuestion(1)">Next</button>
</div>
<div id="question2" class="questionPage hidden">
    <h2>Question 2: Describe our happiest memory together.</h2>
    <textarea id="answer2"></textarea>
    <button onclick="nextQuestion(2)">Next</button>
</div>
<div id="question3" class="questionPage hidden">
    <h2>Question 3: How do you imagine our future together?</h2>
    <textarea id="answer3"></textarea>
    <button onclick="nextQuestion(3)">Next</button>
</div>
<div id="question4" class="questionPage hidden">
    <h2>Question 4: Write a message to me from your heart.</h2>
    <textarea id="answer4"></textarea>
    <button onclick="nextQuestion(4)">Next</button>
</div>

<!-- Result Page -->
<div id="resultPage" class="hidden">
    <h1>Your Answers</h1>
    <div><strong>Question 1:</strong> <span id="res1"></span></div>
    <div><strong>Question 2:</strong> <span id="res2"></span></div>
    <div><strong>Question 3:</strong> <span id="res3"></span></div>
    <div><strong>Question 4:</strong> <span id="res4"></span></div>
    <button onclick="showProposal()">See Proposal ðŸ’–</button>
</div>

<!-- Proposal Page -->
<div id="proposalPage" class="hidden">
    <h1>Will u marry me?</h1>
</div>

<!-- Audio -->
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop autoplay></audio>
<audio id="kissSound" src="https://www.soundjay.com/human/sounds/kiss-1.mp3"></audio>

<script>
/* Floating Hello Kitty */
function createKitty() {
    let kitty = document.createElement('img');
    kitty.src = 'https://i.ibb.co/3v0VYbM/hello-kitty.png';
    kitty.className = 'kitty';
    kitty.style.left = Math.random() * window.innerWidth + 'px';
    kitty.style.animationDuration = (5 + Math.random() * 5) + 's';
    document.body.appendChild(kitty);
    setTimeout(() => kitty.remove(), 10000);
}
setInterval(createKitty, 500);

/* Password Check */
function checkPassword() {
    let input = document.getElementById('passwordInput').value.trim().toLowerCase();
    let msg = document.getElementById('lockMsg');
    if(input === 'may 17' || input === '17 may') {
        document.getElementById('lockScreen').classList.add('hidden');
        document.getElementById('safeMessage').classList.remove('hidden');
    } else {
        msg.textContent = 'Wrong password! Try again ðŸ˜˜';
    }
}

/* Safe Message Next Button */
function startCountdownInterface() {
    document.getElementById('safeMessage').classList.add('hidden');
    startCountdown();
}

/* Countdown */
function startCountdown() {
    let countDiv = document.getElementById('countdown');
    let number = document.getElementById('countdownNumber');
    let count = 10;
    countDiv.classList.remove('hidden');
    let interval = setInterval(() => {
        number.textContent = count;
        count--;
        if(count < 0) {
            clearInterval(interval);
            countDiv.classList.add('hidden');
            showHappyNewYear();
        }
    }, 1000);
}

/* Fireworks Animation */
function showHappyNewYear() {
    let page = document.getElementById('happyNewYear');
    page.classList.remove('hidden');

    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function Firework() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height;
        this.targetY = Math.random() * canvas.height/2;
        this.color = 'hsl(' + Math.random()*360 + ',100%,50%)';
        this.speed = 2 + Math.random()*3;
        this.radius = 2 + Math.random()*2;
    }
    Firework.prototype.update = function() {
        this.y -= this.speed;
        if(this.y <= this.targetY) { this.y = canvas.height; this.targetY = Math.random()*canvas.height/2; }
    }
    Firework.prototype.draw = function() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fillStyle = this.color;
        ctx.fill();
    }

    let fireworks = [];
    for(let i=0;i<50;i++) fireworks.push(new Firework());

    function animate() {
        ctx.fillStyle = 'rgba(255,230,240,0.2)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        fireworks.forEach(fw => { fw.update(); fw.draw(); });
        requestAnimationFrame(animate);
    }
    animate();

    setTimeout(() => {
        page.classList.add('hidden');
        showQuestion(1);
    }, 5000);
}

/* Question Pages */
let answers = {};
function showQuestion(num) {
    document.getElementById('question'+num).classList.remove('hidden');
}
function nextQuestion(num) {
    let textarea = document.getElementById('answer'+num);
    let value = textarea.value.trim();
    if(value.split('.').filter(s=>s.trim()!=='').length < 3){
        alert('Please write at least 3 sentences!');
        return;
    }
    answers['res'+num] = value;
    document.getElementById('question'+num).classList.add('hidden');
    if(num<4) { showQuestion(num+1); } else { showResults(); }
}

/* Result Page */
function showResults() {
    document.getElementById('resultPage').classList.remove('hidden');
    for(let i=1;i<=4;i++){ document.getElementById('res'+i).textContent = answers['res'+i]; }
}

/* Proposal Page */
function showProposal() {
    document.getElementById('resultPage').classList.add('hidden');
    let proposal = document.getElementById('proposalPage');
    proposal.classList.remove('hidden');
    document.getElementById('kissSound').play();
}
</script>
</body>
</html>
